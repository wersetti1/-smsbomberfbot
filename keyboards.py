from winreg import KEY_QUERY_VALUE
from aiogram.types import (
    InlineKeyboardButton,
    InlineKeyboardMarkup,
    KeyboardButton,
    ReplyKeyboardMarkup,
)
from db import get_bomber_history, get_rang


def start_kb():
    keyboard = ReplyKeyboardMarkup(resize_keyboard=True)
    kb1 = KeyboardButton("üî• –ù–∞—á–∞—Ç—å")
    kb2 = KeyboardButton("üë§ –ú–æ–π –∞–∫–∫–∞—É–Ω—Ç")
    kb3 = KeyboardButton("‚ùì FAQ / –ü–æ–º–æ—â—å")
    kb4 = KeyboardButton("‚ú® –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
    kb5 = KeyboardButton("üí¨ –û —Å–µ—Ä–≤–∏—Å–µ")
    keyboard.add(kb1).add(kb2, kb4).add(kb3, kb5)
    return keyboard


def back_admin_menu():
    keyboard = InlineKeyboardMarkup()
    kb = InlineKeyboardButton(text="–ù–∞–∑–∞–¥", callback_data="back_adm_menu")
    keyboard.add(kb)
    return keyboard


def admin_kb():
    keyboard = InlineKeyboardMarkup(row_width=2)
    kb = InlineKeyboardButton(text="–í—ã–¥–∞—Ç—å –±–∞–ª–∞–Ω—Å", callback_data="set_balance")
    kb1 = InlineKeyboardButton(text="–†–∞—Å—Å—ã–ª–∫–∞", callback_data="mailing")
    kb2 = InlineKeyboardButton(text="–ó–∞–±–∞–Ω–∏—Ç—å", callback_data="ban_user")
    kb3 = InlineKeyboardButton(text="–†–∞–∑–±–∞–Ω–∏—Ç—å", callback_data="unban_user")
    kb4 = InlineKeyboardButton(text="–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏", callback_data="watch_subs")
    kb5 = InlineKeyboardButton(text="–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ—Ñ–∏–ª—å", callback_data="watch_profile")
    kb6 = InlineKeyboardButton(
        text="–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤", callback_data="promo_generator"
    )
    kb7 = InlineKeyboardButton(text="–û–±–Ω—É–ª–∏—Ç—å —Å–ª–æ—Ç—ã", callback_data="reset_slots")
    keyboard.add(kb, kb1).add(kb2, kb3).add(kb4, kb5).add(kb6, kb7)
    return keyboard


def flood_type():
    keyboard = InlineKeyboardMarkup(row_width=2)
    kb = InlineKeyboardButton(text="ü§¨ –û–±—ã—á–Ω—ã–π —Ñ–ª—É–¥", callback_data="default_flood")
    kb1 = InlineKeyboardButton(
        text="‚ò†Ô∏è –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ñ–ª—É–¥", callback_data="infinity_flood"
    )
    kb2 = InlineKeyboardButton(text="üìù –ò—Å—Ç–æ—Ä–∏—è", callback_data="history_flood")
    kb3 = InlineKeyboardButton(text="ü§ç –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫", callback_data="whitelist_check")
    kb4 = InlineKeyboardButton(text="‚ùå –ó–∞–∫—Ä—ã—Ç—å", callback_data="close_message")
    keyboard.add(kb, kb1).add(kb2, kb3).add(kb4)
    return keyboard


def profile_kb():
    keyboard = InlineKeyboardMarkup(row_width=2)
    kb = InlineKeyboardButton(text="üí∞ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å", callback_data="balance_up")
    kb1 = InlineKeyboardButton(text="üíµ –ü–æ–¥–ø–∏—Å–∫–∞", callback_data="sub")
    kb2 = InlineKeyboardButton(text="‚öúÔ∏è –†–∞–Ω–≥–∏", callback_data="rangs")
    kb3 = InlineKeyboardButton(text="üéü –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á", callback_data="activate_key")
    kb4 = InlineKeyboardButton(
        text="ü§ù –ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞", callback_data="partner programm"
    )
    keyboard.add(kb).add(kb1, kb2).add(kb3).add(kb4)
    return keyboard


def buy_sub_confirm(duration, cost):
    keyboard = InlineKeyboardMarkup(row_width=1)
    kb = InlineKeyboardButton(
        text="‚òëÔ∏è –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é", callback_data=f"buy_sub_confirm|{duration}|{cost}"
    )
    kb1 = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back")
    keyboard.add(kb, kb1)
    return keyboard


def buy_sub_kb():
    keyboard = InlineKeyboardMarkup(row_width=1)
    kb = InlineKeyboardButton(
        text="üçÄ 1 —á–∞—Å - 9.90 —Ä—É–±–ª–µ–π üçÄ", callback_data="buy_sub|hour|9.90"
    )
    kb1 = InlineKeyboardButton(
        text="üíö 24 —á–∞—Å–∞ - 29.90 —Ä—É–±–ª–µ–π üíö", callback_data="buy_sub|day|29.90"
    )
    kb2 = InlineKeyboardButton(
        text="üíõ 7 –¥–Ω–µ–π - 69.90 —Ä—É–±–ª–µ–π üíõ", callback_data="buy_sub|week|69.90"
    )
    kb3 = InlineKeyboardButton(
        text="üî• 30 –¥–Ω–µ–π - 169.90 —Ä—É–±–ª–µ–π üî•", callback_data="buy_sub|month|169.90"
    )
    kb4 = InlineKeyboardButton(
        text="üß° 90 –¥–Ω–µ–π - 299.90 —Ä—É–±–ª–µ–π üß°",
        callback_data="buy_sub|one_and_half_month|299.90",
    )
    kb5 = InlineKeyboardButton(
        text="üß° 180 –¥–Ω–µ–π - 499.90 —Ä—É–±–ª–µ–π üß°", callback_data="buy_sub|half_year|499.90"
    )
    kb6 = InlineKeyboardButton(
        text="üíú 365 –¥–Ω–µ–π - 999.90 —Ä—É–±–ª–µ–π üíú", callback_data="buy_sub|year|999.90"
    )
    kb7 = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back")
    keyboard.add(kb, kb1, kb2, kb3, kb4, kb5, kb6, kb7)
    return keyboard


def rangs_choose_kb(rang, current_rang):
    keyboard = InlineKeyboardMarkup(row_width=2)
    if rang != current_rang and rang != "ü•â Bronze":
        rang_info = get_rang(rang)
        kb4 = InlineKeyboardButton(
            text=f"üí≤ –ö—É–ø–∏—Ç—å —ç—Ç–æ—Ç —Ä–∞–Ω–≥ - {rang_info[4]} ‚ÇΩ üí≤",
            callback_data=f"rang_buy|{rang}",
        )
        keyboard.add(kb4)
    kb = InlineKeyboardButton(text="ü•â Bronze", callback_data="rang_choose|ü•â Bronze")
    kb1 = InlineKeyboardButton(text="ü•à Silver", callback_data="rang_choose|ü•à Silver")
    kb2 = InlineKeyboardButton(text="ü•á Gold", callback_data="rang_choose|ü•á Gold")
    kb3 = InlineKeyboardButton(text="üíé Diamond", callback_data="rang_choose|üíé Diamond")
    kb5 = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back")
    keyboard.add(kb, kb1, kb2, kb3).add(kb5)
    return keyboard


def balance_up_kb():
    keyboard = InlineKeyboardMarkup(row_width=4)
    kb = InlineKeyboardButton(text="10 ‚ÇΩ", callback_data="balance_up_amount|10")
    kb1 = InlineKeyboardButton(text="30 ‚ÇΩ", callback_data="balance_up_amount|30")
    kb2 = InlineKeyboardButton(text="50 ‚ÇΩ", callback_data="balance_up_amount|50")
    kb3 = InlineKeyboardButton(text="60 ‚ÇΩ", callback_data="balance_up_amount|60")
    kb4 = InlineKeyboardButton(text="100 ‚ÇΩ", callback_data="balance_up_amount|100")
    kb5 = InlineKeyboardButton(text="150 ‚ÇΩ", callback_data="balance_up_amount|150")
    kb6 = InlineKeyboardButton(text="200 ‚ÇΩ", callback_data="balance_up_amount|200")
    kb7 = InlineKeyboardButton(text="300 ‚ÇΩ", callback_data="balance_up_amount|300")
    kb8 = InlineKeyboardButton(text="500 ‚ÇΩ", callback_data="balance_up_amount|500")
    kb9 = InlineKeyboardButton(text="700 ‚ÇΩ", callback_data="balance_up_amount|700")
    kb10 = InlineKeyboardButton(text="1000 ‚ÇΩ", callback_data="balance_up_amount|1000")
    kb11 = InlineKeyboardButton(text="2000 ‚ÇΩ", callback_data="balance_up_amount|2000")
    kb12 = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back")
    keyboard.add(kb, kb1, kb2, kb3, kb4, kb5, kb6, kb7, kb8, kb9, kb10, kb11).add(kb12)
    return keyboard


def payment_system_choose(summ):
    keyboard = InlineKeyboardMarkup(row_width=3)
    kb = InlineKeyboardButton(
        text="ü•ù Qiwi/–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞", callback_data=f"balance_up_system|qiwi|{summ}"
    )
    kb1 = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back")
    keyboard.add(kb).add(kb1)
    return keyboard


def create_bill(bill_id, url, amount):
    bill_kb = InlineKeyboardMarkup(row_width=2)
    bill1 = InlineKeyboardButton(text="üí≥ –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ", url=url)
    bill2 = InlineKeyboardButton(
        text="‚òëÔ∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É",
        callback_data=f"check_bill_status|{bill_id}|{amount}",
    )
    bill3 = InlineKeyboardButton(
        text="üö´ –û—Ç–º–µ–Ω–∏—Ç—å –ø–ª–∞—Ç–µ–∂", callback_data=f"pay_cancel|{bill_id}"
    )
    bill_kb.add(bill1, bill2, bill3)
    return bill_kb


def ref_programm_kb():
    keyboard = InlineKeyboardMarkup(row_width=2)
    kb = InlineKeyboardButton(
        text="üí∞ –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–≤–æ–¥", callback_data="withdraw_request"
    )
    kb1 = InlineKeyboardButton(
        text="üîó –°–æ–∫—Ä–∞—Ç–∏—Ç—å —Å—Å—ã–ª–∫—É (clck.ru)", callback_data="link_shorter"
    )
    kb2 = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back")
    keyboard.add(kb, kb1).add(kb2)
    return keyboard


def withdraw_request_kb(requisites):
    keyboard = InlineKeyboardMarkup(row_width=1)
    kb = InlineKeyboardButton(
        text="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å", callback_data=f"withdraw_request_user|{requisites}"
    )
    kb1 = InlineKeyboardButton(text="–û—Ç–º–µ–Ω–∞", callback_data="back")
    keyboard.add(kb, kb1)
    return keyboard


def withdraw_request_confirm_kb(userid):
    keyboard = InlineKeyboardMarkup(row_width=1)
    kb = InlineKeyboardButton(
        text="–û–ø–ª–∞—á–µ–Ω–æ", callback_data=f"withdraw_request_admin|{userid}"
    )
    kb1 = InlineKeyboardButton(
        text="–û—Ç–∫–ª–æ–Ω–∏—Ç—å", callback_data=f"withdraw_request_cancel|{userid}"
    )
    keyboard.add(kb, kb1)
    return keyboard


def whitelist_kb():
    keyboard = InlineKeyboardMarkup(row_width=2)
    kb = InlineKeyboardButton(
        text="‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä", callback_data="whitelist_number_add"
    )
    kb1 = InlineKeyboardButton(
        text="‚ùî –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–º–µ—Ä", callback_data="check_number_whitelist"
    )
    kb2 = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back1")
    keyboard.add(kb, kb1).add(kb2)
    return keyboard


def flood_type_kb(_type):
    keyboard = InlineKeyboardMarkup(row_width=1)
    kb = InlineKeyboardButton(text="üì® SMS", callback_data=f"sms_bomber|{_type}")
    kb1 = InlineKeyboardButton(
        text="üìû –ê–≤—Ç–æ-–∑–≤–æ–Ω–∫–∏", callback_data=f"auto_calls_bomber|{_type}"
    )
    kb2 = InlineKeyboardButton(
        text="‚òéÔ∏è –û–±—Ä–∞—Ç–Ω—ã–µ –∑–≤–æ–Ω–∫–∏", callback_data=f"reverse_calls_bomber|{_type}"
    )
    kb3 = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back1")
    keyboard.add(kb, kb1, kb2, kb3)
    return keyboard


def flood_mode_kb(_type, bomber):
    keyboard = InlineKeyboardMarkup(row_width=1)
    kb = InlineKeyboardButton(
        text="üçÄ –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π", callback_data=f"bomber_mode|classic|{_type}|{bomber}"
    )
    kb1 = InlineKeyboardButton(
        text="üöß –ú–æ—â–Ω—ã–π", callback_data=f"bomber_mode|powerful|{_type}|{bomber}"
    )
    kb2 = InlineKeyboardButton(
        text="üî• –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π", callback_data=f"bomber_mode|legendary|{_type}|{bomber}"
    )
    kb3 = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back1")
    keyboard.add(kb, kb1, kb2, kb3)
    return keyboard


def confirm_rang_buy(rang, cost):
    keyboard = InlineKeyboardMarkup(row_width=1)
    kb = InlineKeyboardButton(
        text="‚òëÔ∏è –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é", callback_data=f"buy_rang_confirm|{rang}|{cost}"
    )
    kb1 = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back")
    keyboard.add(kb, kb1)
    return keyboard


def task_kb(task_id):
    keyboard = InlineKeyboardMarkup(row_width=2)
    kb = InlineKeyboardButton(text="‚ùå –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å", callback_data=f"task_stop|{task_id}")
    kb1 = InlineKeyboardButton(
        text="üîÑ –û–±–Ω–æ–≤–∏—Ç—å", callback_data=f"refresh_task|{task_id}"
    )
    kb2 = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back1")
    keyboard.add(kb, kb1).add(kb2)
    return keyboard


def history_kb(userid):
    emojis = {
        "ü§¨ –û–±—ã—á–Ω—ã–π —Ñ–ª—É–¥": "ü§¨",
        "‚ò†Ô∏è –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ñ–ª—É–¥": "‚ò†Ô∏è",
        "–í –ø—Ä–æ—Ü–µ—Å—Å–µ": "‚åõÔ∏è",
        "üì® SMS": "üì®",
        "‚òéÔ∏è –û–±—Ä–∞—Ç–Ω—ã–µ –∑–≤–æ–Ω–∫–∏": "‚òéÔ∏è",
        "üìû –ê–≤—Ç–æ-–ó–≤–æ–Ω–∫–∏": "üìû",
        "–ó–∞–≤–µ—Ä—à–µ–Ω–æ": "‚òëÔ∏è",
        "–î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã": " ‚òëÔ∏è",
    }
    history = get_bomber_history(userid)
    keyboard = InlineKeyboardMarkup(row_width=2)
    for task in history:
        kb = KeyboardButton(
            text=f"{emojis[task[6]]} #{task[8]} {emojis[task[2]]} +{task[1]} {emojis[task[4]]}",
            callback_data=f"refresh_task|{task[8]}",
        )
        keyboard.add(kb)
    kb = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back1")
    keyboard.add(kb)
    return keyboard


def promo_generate_choose_kb():
    keyboard = InlineKeyboardMarkup(row_width=2)
    kb = InlineKeyboardButton(text="üçÄ 1 —á–∞—Å üçÄ", callback_data="generate|sub|hour")
    kb1 = InlineKeyboardButton(text="üíö 24 —á–∞—Å–∞ üíö", callback_data="generate|sub|day")
    kb2 = InlineKeyboardButton(text="üíõ 7 –¥–Ω–µ–π üíõ", callback_data="generate|sub|week")
    kb3 = InlineKeyboardButton(text="üî• 30 –¥–Ω–µ–π üî•", callback_data="generate|sub|month")
    kb4 = InlineKeyboardButton(
        text="üß° 90 –¥–Ω–µ–π üß°",
        callback_data="generate|sub|one_and_half_month",
    )
    kb5 = InlineKeyboardButton(
        text="üß° 180 –¥–Ω–µ–π üß°", callback_data="generate|sub|half_year"
    )
    kb6 = InlineKeyboardButton(text="üíú 365 –¥–Ω–µ–π üíú", callback_data="generate|sub|year")
    kb7 = InlineKeyboardButton(text="‚Ü™Ô∏è –ù–∞–∑–∞–¥", callback_data="back_adm_menu")
    kb8 = InlineKeyboardButton(text="ü•â Bronze", callback_data="generate|rang|ü•â Bronze")
    kb9 = InlineKeyboardButton(text="ü•à Silver", callback_data="generate|rang|ü•à Silver")
    kb10 = InlineKeyboardButton(text="ü•á Gold", callback_data="generate|rang|ü•á Gold")
    kb11 = InlineKeyboardButton(
        text="üíé Diamond", callback_data="generate|rang|üíé Diamond"
    )
    keyboard.add(kb, kb1, kb2, kb3, kb4, kb5, kb6, kb8, kb9, kb10, kb11).add(kb7)
    return keyboard
